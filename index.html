<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Natsuki Oneyama">
  <title>SCRAPBOOK_NATSUKI</title>


  <link rel="preconnect" href="https://use.typekit.net" crossorigin>
  <link rel="preconnect" href="https://p.typekit.net" crossorigin>
  <link rel="stylesheet" href="https://use.typekit.net/tar7poy.css">

  <link rel="stylesheet" href="style.css">

  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon.png">
</head>

<body>
  <div id="scrubber">
    <div class="frame">
    <img
  id="frame"
  alt=""
  decoding="async"
  data-path="img07/"    
  data-start="1"        
  data-end="30"        
  data-pad="2"      
  data-ext="webp" 
  >
   <div class="loading" id="loader">loading…</div>
    </div>
  </div>

  <a href="info.html" id="info-btn" aria-label="Information">i</a>

  <script src="script.js" defer></script>

<script>
(function () {
  function pad(n, d) { return String(n).padStart(d, '0'); }
  function callExistingSetter(i) {
    if (typeof window.scrubTo === 'function') { window.scrubTo(i); return true; }
    if (typeof window.setFrame === 'function') { window.setFrame(i); return true; }
    return false;
  }

  window.addEventListener('load', function () {
    const img = document.getElementById('frame');
    if (!img) return;

    // ← ここが追加：戻り時はイントロをスキップ
    const skip = sessionStorage.getItem('skipIntro') === '1';
    if (skip) {
      sessionStorage.removeItem('skipIntro');    // 1回だけスキップ
      // 最初のフレームで静止（既存関数があればそちら）
      const start = parseInt(img.dataset.start || '1', 10);
      const padN  = parseInt(img.dataset.pad   || '2', 10);
      const ext   = img.dataset.ext || 'webp';
      const path  = img.dataset.path || '';
      if (!callExistingSetter(start)) {
        img.src = path + String(start).padStart(padN, '0') + '.' + ext;
      }
      return; // イントロ再生せず終了
    }

    // 以降は既存のイントロ再生（あなたの値のままでOK）
    const path = img.dataset.path || '';
    const start = parseInt(img.dataset.start || '1', 10);
    const end   = parseInt(img.dataset.end   || '1', 10);
    const padN  = parseInt(img.dataset.pad   || '2', 10);
    const ext   = img.dataset.ext || 'webp';

    let i = start;
    const fps = 10;
    const duration = 3000;
    const stepMs = 1000 / fps;

    const timer = setInterval(() => {
      if (!callExistingSetter(i)) {
        img.src = path + String(i).padStart(padN, '0') + '.' + ext;
      }
      i = (i < end) ? i + 1 : start;
    }, stepMs);

    setTimeout(() => {
      clearInterval(timer);
      if (!callExistingSetter(start)) {
        img.src = path + String(start).padStart(padN, '0') + '.' + ext;
      }
    }, duration);
  });
})();
</script>

<script>
(function () {
  const ua = navigator.userAgent || "";
  // Instagramアプリ内ブラウザを検出
  const inIG = ua.includes("Instagram");
  if (!inIG) return;

  // 現在のURLを取得
  const url = window.location.href;

  // iOS or Android 判定
  const isiOS = /iPhone|iPad|iPod/i.test(ua);
  const isAndroid = /Android/i.test(ua);

  // iOSならSafari、AndroidならChromeで開く
  if (isiOS) {
    window.location = "x-safari-" + url;
  } else if (isAndroid) {
    window.location = "intent://" + url.replace(/^https?:\/\//, "") +
      "#Intent;scheme=https;package=com.android.chrome;end";
  }
})();
</script>
<script>
  document.getElementById('back-link')?.addEventListener('click', function () {
    sessionStorage.setItem('skipIntro', '1');
  });
</script>

</body>
</html>


